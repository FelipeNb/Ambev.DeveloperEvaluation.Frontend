<p-card>
  <div style="display: flex; justify-content: space-between; align-items: center;">
    <h4>Products</h4>
    <div>
      <button pButton label="Novo" (click)="openCreate()"></button>
    </div>
  </div>

  <p-table [value]="items" [loading]="loading">
    <ng-template pTemplate="header">
      <tr>
        <th>Title</th>
        <th>Price</th>
        <th>Category</th>
        <th>Rating</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-row>
      <tr>
        <td>{{row.title}}</td>
        <td>{{row.price | currency}}</td>
        <td>{{row.category}}</td>
        <td>{{row.rating?.rate}}/5 ({{row.rating?.count}})</td>
        <td>
          <button pButton icon="pi pi-pencil" (click)="openEdit(row)"></button>
          <button pButton icon="pi pi-trash" (click)="remove(row.id)"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-card>

<p-dialog header="Product" [(visible)]="displayDialog" [modal]="true" [style]="{width: '50vw'}">
  <div class="p-fluid">
    <div class="p-field">
      <label>Title</label>
      <input pInputText name="title" [(ngModel)]="product.title" required>
    </div>
    <div class="p-field">
      <label>Price</label>
      <input pInputText name="price" [(ngModel)]="product.price" type="number" step="0.01" required>
    </div>
    <div class="p-field">
      <label>Description</label>
      <input pInputText name="description" [(ngModel)]="product.description">
    </div>
    <div class="p-field">
      <label>Category</label>
      <input pInputText name="category" [(ngModel)]="product.category">
    </div>
    <div class="p-field">
      <label>Image URL</label>
      <input pInputText name="image" [(ngModel)]="product.image">
    </div>
    <div style="display: flex; gap: 1rem;">
      <div style="flex: 1;">
        <label>Rating</label>
        <input pInputText name="rating" [(ngModel)]="product.rating!.rate" type="number" step="0.1" min="0" max="5">
      </div>
      <div style="flex: 1;">
        <label>Count</label>
        <input pInputText name="count" [(ngModel)]="product.rating!.count" type="number" min="0">
      </div>
    </div>
  </div>
  <p-footer>
    <button pButton label="Salvar" (click)="save()" [disabled]="!product.title || !product.price"></button>
  </p-footer>
</p-dialog>
